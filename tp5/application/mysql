#生活服务分类表
CREATE TABLE o2o_category(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  parent_id INT(10) UNSIGNED NOT NULL  DEFAULT 0,
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY parent_id(parent_id)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;
#城市表
CREATE TABLE o2o_city(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  uname VARCHAR(50) NOT NULL DEFAULT '' COMMENT '英文名',
  parent_id INT(10) UNSIGNED NOT NULL  DEFAULT 0,
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY parent_id(parent_id),
  UNIQUE KEY uname(uname)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;

#商圈表
CREATE TABLE o2o_area(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  city_id INT(11) UNSIGNED NOT NULL DEFAULT 0 ,
  parent_id INT(10) UNSIGNED NOT NULL  DEFAULT 0,
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY parent_id(parent_id),
  KEY city_id(city_id)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;
#商户表
CREATE TABLE o2o_bis(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  email VARCHAR(50) NOT NULL DEFAULT '',
  logo VARCHAR(255) NOT NULL DEFAULT '',
  lience_logo VARCHAR(255) NOT NULL DEFAULT '' COMMENT '营业执照',
  discription TEXT NOT NULL COMMENT '描述',
  city_id INT(11) UNSIGNED NOT NULL DEFAULT 0 ,
  city_path VARCHAR(50) NOT NULL DEFAULT '',
  bank_info VARCHAR(50) NOT NULL DEFAULT '' COMMENT '银行账号',
  bank_name VARCHAR(50) NOT NULL DEFAULT '' COMMENT '开户行名称',
  bank_user VARCHAR(50) NOT NULL DEFAULT '' COMMENT '用户',
  money DECIMAL(20,2) NOT NULL DEFAULT '0.00'COMMENT '金额',
  faren VARCHAR(20) NOT NULL DEFAULT ''COMMENT '法人',
  faren_tel VARCHAR(20) NOT NULL DEFAULT ''COMMENT '法人联系方式',
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY city_id(city_id),
  KEY name(name)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;

#商户账号表
CREATE TABLE o2o_bis_account(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  username VARCHAR(50) NOT NULL DEFAULT '',
  password VARCHAR(32) NOT NULL DEFAULT '',
  code VARCHAR(10) NOT NULL DEFAULT '',
  bis_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  last_login_ip VARCHAR(30) NOT NULL DEFAULT '',
  last_login_time int(11) unsigned NOT NULL DEFAULT 0,
  is_main TINYINT(1) NOT NULL DEFAULT 0 COMMENT '是否默认管理员',
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY bis_id(bis_id),
  KEY username(username)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;

#商户门店表
CREATE TABLE o2o_bis_location(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  logo VARCHAR(255) NOT NULL DEFAULT '',
  address VARCHAR(255) NOT NULL DEFAULT '',
  tel VARCHAR(30) NOT NULL DEFAULT '',
  contact VARCHAR(30) NOT NULL DEFAULT ''COMMENT '联系人',
  xpoint VARCHAR(30) NOT NULL DEFAULT ''COMMENT '经度',
  ypoint VARCHAR(30) NOT NULL DEFAULT ''COMMENT '纬度',
  bis_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  open_time VARCHAR(11)  NOT NULL DEFAULT '' COMMENT '营业时间',
  content TEXT  NOT NULL COMMENT '门店介绍',
  is_main TINYINT(1) NOT NULL DEFAULT 0 COMMENT '是否默认管理员',
  api_address VARCHAR(30) NOT NULL DEFAULT '',
  city_id INT(11) UNSIGNED NOT NULL DEFAULT 0 ,
  city_path VARCHAR(50) NOT NULL DEFAULT '',
  category_id INT(11) UNSIGNED NOT NULL  DEFAULT 0,
  category_path VARCHAR(50) NOT NULL DEFAULT '',
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY bis_id(bis_id),
  KEY city_id(city_id),
  KEY category_id(category_id),
  KEY name(name)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;

#团购商品表
CREATE TABLE o2o_bis_deal(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL DEFAULT '',
  category_id INT(11) UNSIGNED NOT NULL  DEFAULT 0,
  se_category_id INT(11) UNSIGNED NOT NULL  DEFAULT 0 COMMENT '二级栏目',
  bis_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  localtion_ids VARCHAR(100) NOT NULL DEFAULT '' COMMENT '所属店面',
  image VARCHAR(200) NOT NULL DEFAULT '',
  discription TEXT NOT NULL COMMENT '描述',
  start_time INT(11) NOT NULL DEFAULT 0 COMMENT '活动开始时间',
  end_time INT(11) NOT NULL DEFAULT 0 COMMENT '活动结束时间',
  open_time VARCHAR(11)  NOT NULL DEFAULT '' COMMENT '营业时间',
  origin_price DECIMAL(20,2) NOT NULL DEFAULT '0.00'COMMENT '原价',
  current_price DECIMAL(20,2) NOT NULL DEFAULT '0.00'COMMENT '折扣价',
  balance_price DECIMAL(20,2) NOT NULL DEFAULT '0.00'COMMENT '抽成结算后价格',
  note TEXT  NOT NULL COMMENT '提示',
  city_id INT(11) UNSIGNED NOT NULL DEFAULT 0 ,
  buy_count INT(11) UNSIGNED NOT NULL DEFAULT 0 COMMENT '购买数量',
  total_count INT(11) UNSIGNED NOT NULL DEFAULT 0 COMMENT '总数量',
  cpupons_start_time INT(11) NOT NULL DEFAULT 0 COMMENT '团购生效时间',
  cpupons_end_time INT(11) NOT NULL DEFAULT 0 COMMENT '团购时效时间',
  xpoint VARCHAR(30) NOT NULL DEFAULT ''COMMENT '经度',
  ypoint VARCHAR(30) NOT NULL DEFAULT ''COMMENT '纬度',
  bis_account_id INT(11) UNSIGNED NOT NULL DEFAULT 0  COMMENT '所属商家',
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY city_id(city_id),
  KEY category_id(category_id),
  KEY se_category_id(se_category_id),
  KEY start_time(start_time),
  KEY end_time(end_time)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;
#用户表
CREATE TABLE o2o_bis_user(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  username VARCHAR(50) NOT NULL DEFAULT '',
  password VARCHAR(32) NOT NULL DEFAULT '',
  code VARCHAR(10) NOT NULL DEFAULT '',
  last_login_ip VARCHAR(30) NOT NULL DEFAULT '',
  last_login_time int(11) unsigned NOT NULL DEFAULT 0,
  email VARCHAR(32) NOT NULL DEFAULT '',
  mobile VARCHAR(32) NOT NULL DEFAULT '',
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE KEY username(username),
  UNIQUE KEY email(email)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;

#推荐位
CREATE TABLE o2o_featured(
  id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  type TINYINT(1)  NOT NULL DEFAULT 0,
  title VARCHAR(32) NOT NULL DEFAULT '',
  image VARCHAR(100) NOT NULL DEFAULT '',
  url VARCHAR(100) NOT NULL DEFAULT '',
  discription TEXT NOT NULL COMMENT '描述',
  listorder INT(8) UNSIGNED NOT NULL DEFAULT 0,
  status TINYINT(1) NOT NULL DEFAULT 0,
  create_time timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  update_time timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id)
)ENGINE = innoDB AUTO_INCREMENT=1 DEFAULT  CHARSET =utf8;



